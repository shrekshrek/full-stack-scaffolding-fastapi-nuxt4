# ========================================
# 生产环境配置模板
# 复制此文件为 .env.production 并填入实际值
# 警告：不要将 .env.production 提交到版本控制
# ========================================

# === PostgreSQL数据库配置 ===
# 数据库用户名
POSTGRES_USER=postgres

# 数据库密码（生产环境必须使用强密码）
# 生成强密码: openssl rand -base64 24
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD

# 数据库名称
POSTGRES_DB=fastapi_db

# === 后端应用配置 ===
# 环境标识（production/staging/development）
ENVIRONMENT=production

# 数据库连接URL
# 重要：密码必须与POSTGRES_PASSWORD完全一致
# 注意：postgres_db 是Docker容器服务名，不要改为localhost
DATABASE_URL=postgresql+asyncpg://postgres:CHANGE_THIS_STRONG_PASSWORD@postgres_db:5432/fastapi_db

# Redis连接配置
# redis 是Docker容器服务名
REDIS_URL=redis://redis:6379/0

# Celery任务队列配置
# 使用不同的Redis数据库编号避免冲突
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# JWT安全配置
# 生成命令: openssl rand -hex 32
# 重要：生产环境必须更改此值
SECRET_KEY=CHANGE_THIS_USE_OPENSSL_RAND_HEX_32_TO_GENERATE
ALGORITHM=HS256

# Token过期时间（分钟）
ACCESS_TOKEN_EXPIRE_MINUTES=15

# 项目基本信息
PROJECT_NAME=全栈应用
API_PREFIX=/api/v1
VERSION=0.1.0

# CORS配置
# 允许的前端来源地址（JSON数组格式）
# 生产环境应该只包含实际的域名
BACKEND_CORS_ORIGINS=["https://yourdomain.com","https://www.yourdomain.com"]

# API速率限制（每分钟请求数）
RATE_LIMIT_PER_MINUTE=60

# === 前端应用配置 ===
# Nuxt session加密密码（至少32个字符）
# 生成命令: openssl rand -base64 32
# 重要：生产环境必须更改此值
NUXT_SESSION_PASSWORD=CHANGE_THIS_MUST_BE_AT_LEAST_32_CHARS_USE_OPENSSL

# API访问基础路径
# 推荐在生产环境显式配置为后端对外暴露的完整地址（含协议和 /api/v1）
# 例如：
NUXT_PUBLIC_API_BASE=https://api.yourdomain.com/api/v1

# ========================================
# 配置检查清单
# ========================================
# [ ] POSTGRES_PASSWORD 已更改为强密码
# [ ] DATABASE_URL 中的密码与 POSTGRES_PASSWORD 一致
# [ ] SECRET_KEY 已使用 openssl rand -hex 32 生成
# [ ] NUXT_SESSION_PASSWORD 已使用 openssl rand -base64 32 生成
# [ ] BACKEND_CORS_ORIGINS 已配置为实际域名
# [ ] 所有 CHANGE_THIS 值都已更改
# ========================================
